# 场景描述
大数据批量插入场景，需要使用多线程方式进行优化，但需要对这个方法加上事务保证数据正常回滚

在 Spring 中可以使用 @Transactional 注解控制事务，出现异常会回滚。
但多线程场景下注解不会生效：如果主线程需要先执行一些修改数据库的操作，当子线程在进行处理出现异常时，主线程修改的数据则不会回滚，导致数据错误。

## 学习
@Transactional 原理：https://www.bilibili.com/video/BV1uw6hY5EoM/?vd_source=2e2bfda6d934ded5322975ea3994ea7c

https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&mid=2247514602&idx=1&sn=30e2d26c800566069707ce877f3da7cc&chksm=c0e86102f79fe81477b8d662effc14f23b92cd91f585e7b446308a724cce32ddec10355861cd&mpshare=1&scene=24&srcid=0215uFpCeJGLBSB4BPNdn8F2&sharer_shareinfo=b13af41fc1b7ed4db717682e12ef020e&sharer_shareinfo_first=b13af41fc1b7ed4db717682e12ef020e#rd